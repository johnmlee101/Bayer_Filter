<!DOCTYPE html>
<html>
    <head>
        <style>
            html, body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
            }

            #filter_canvas {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body>
        <canvas id="filter_canvas" width="1000px" height="500px"></canvas>
    </body>
    <script
        src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
        crossorigin="anonymous">
    </script>
    <script>
        const width = screen.width;
        const height = screen.height;

        function drawImage() {
            function getColorIndicesForCoord(x, y, width) {
                const red = y * (width * 4) + x * 4;

                return [red, red + 1, red + 2, red + 3];
            }

            function getRGBAFromCoord(x, y, imageData) {
                const colorIndex = getColorIndicesForCoord(x, y, imageData.width);
                return [
                    imageData.data[colorIndex[0]],
                    imageData.data[colorIndex[1]],
                    imageData.data[colorIndex[2]],
                    imageData.data[colorIndex[3]]
                ];
            }

            function setRGBA(x, y, rgba, imageData) {
                const colorIndex = getColorIndicesForCoord(x, y, imageData.width);

                imageData.data[colorIndex[0]] = rgba[0];
                imageData.data[colorIndex[1]] = rgba[1];
                imageData.data[colorIndex[2]] = rgba[2];
                imageData.data[colorIndex[3]] = rgba[3];

                return imageData;
            }

            let ctx = document.getElementById('filter_canvas');
            if (ctx.getContext) {

                ctx = ctx.getContext('2d');

                //Loading of the home test image - img1
                const img1 = new Image();

                //drawing of the test image - img1
                img1.onload = function () {
                    //draw background image
                    ctx.drawImage(img1, 0, 0, img1.width / 5, img1.height / 5);

                    const imageData = ctx.getImageData(0, 0, width, height);
                    console.log(imageData);
                    console.log(getRGBAFromCoord(0, 0, imageData));
                    ctx.putImageData(setRGBA(0, 0, [0,0,0,0], imageData), 0, 0);
                };

                img1.src = 'test.jpg';
            }
        }

        function initCanvas() {
            $('#filter_canvas').attr("width",$(window).width());
            $('#filter_canvas').attr("height",$(window).height());
        }

        function bayerFilter() {
            let ctx = document.getElementById('filter_canvas');

            if (ctx.getContext) {
                ctx = ctx.getContext('2d');
                const imageData = ctx.getImageData(0, 0, width, height);
                console.log(imageData);
                console.log(getRGBAFromCoord(0, 0, imageData));
            }
        }

        initCanvas();
        drawImage();
        // bayerFilter();
    </script>
</html>